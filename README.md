# TSC-Project

## BOM (Bill Of Materials)

| Component             | Supplier Link                                                                                             | Datasheet                                                                                         |
|-----------------------|-----------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| 112A-TAAR-R03         | [Model](https://store.comet.srl.ro/Catalogue/Product/43497/)                                             | [Datasheet](https://www.snapeda.com/parts/112A-TAAR-R03/Attend/datasheet/)                        |
| 744043680             | [Model](https://ro.mouser.com/ProductDetail/Wurth-Elektronik/744043680?qs=PGXP4M47uW6VkZq%252BkzjrHA%3D%3D)| [Datasheet](https://www.we-online.com/components/products/datasheet/744043680.pdf)                |
| BD5229G-TR            | [Model](https://componentsearchengine.com/part-view/BD5229G-TR/ROHM%20Semiconductor)                     | [Datasheet](https://fscdn.rohm.com/en/products/databook/datasheet/ic/power/voltage_detector/bd52xxg-e.pdf) |
| Capacitor 0402        | [Model](https://ro.mouser.com/c/passive-components/capacitors/ceramic-capacitors/?q=CC0402&srsltid=AfmBOoogjqwwed3xvp6V5-bfVkRuawirfMcnAC47L-UQdC3mnXJk097M) | [Datasheet](https://componentsearchengine.com/Datasheets/2/CC0402MRX5R5BB106.pdf)                  |
| CPH3225A              | [Model](https://www.snapeda.com/parts/CPH3225A/Seiko+Instruments/view-part/?ref=snap)                    | [Datasheet](https://www.snapeda.com/parts/CPH3225A/Seiko%20Instruments/datasheet/)                |
| Custom Button         | [Model](https://industry.panasonic.com/global/en/products/control/switch/light-touch/number/evqpuj02k)    | [Datasheet](https://industry.panasonic.com/global/en/downloads?tab=catalog&small_g_cd=203&part_no=EVQPUJ02K) |
| DS3231SN              | [Model](https://www.snapeda.com/parts/DS3231SN%23/Analog+Devices/view-part/?ref=eda)                    | [Datasheet](https://www.snapeda.com/parts/DS3231SN%23/Analog%20Devices/datasheet/)                |
| ESP32 WROVER 0805 Capacitor | [Model](https://componentsearchengine.com/part-view/ESP32-WROVER-IB/Espressif%20Systems)          | [Datasheet](https://4donline.ihs.com/images/VipMasterIC/IC/ESPS/ESPS-S-A0016256762/ESPS-S-A0016256762-1.pdf?hkey=EF798316E3902B6ED9A73243A3159BB0)                                                                                      |
| ESP32 WROVER BME680 Sensor | [Model](https://www.snapeda.com/parts/BME680/Bosch/view-part/?welcome=home)                        | [Datasheet](https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bme680-ds001.pdf) |
| ESP32 WROVER MCP73831 Power Management | [Model](https://www.snapeda.com/parts/BME680/Bosch/view-part/?welcome=home)             | [Datasheet](https://www.snapeda.com/parts/MCP73831T-2ACI/OT/Microchip/datasheet/)                  |
| ESP32C6 Varistor 1812 | [Model](https://componentsearchengine.com/part-view/ESP32-C6-MINI-1-H4/Espressif%20Systems)           | [Datasheet](https://4donline.ihs.com/images/VipMasterIC/IC/ESPS/ESPS-S-A0018537656/ESPS-S-A0018537656-1.pdf?hkey=EF798316E3902B6ED9A73243A3159BB0)                                                                                      |
| ESP32C6 WROOM-1-N8    | [Model](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif+Systems/view-part/?ref=eda)         | [Datasheet](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif%20Systems/datasheet/)      |
| FH34SRJ-24S-0.5SH     | [Model](https://ro.mouser.com/ProductDetail/Hirose-Connector/FH34SRJ-24S-0.5SH99?qs=vcbW%252B4%252BSTIpKBl5ap9J8Fw%3D%3D) | [Datasheet](https://www.snapeda.com/parts/FH34SRJ-24S-0.5SH(99)/Hirose%20Connector/datasheet/)    |
| LED Chip 0603         | [Model](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/view-part/?ref=search&t=LED%200603)        | [Datasheet](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/datasheet/)                     |
| MAX17048G+T10         | [Model](https://www.snapeda.com/parts/MAX17048G+T10/Analog+Devices/view-part/?ref=eda)                  | [Datasheet](https://www.snapeda.com/parts/MAX17048G+T10/Analog%20Devices/datasheet/)              |
| MBR0530 Schottky Diode| [Model](https://www.snapeda.com/parts/MBR0530/Onsemi/view-part/?ref=snap)                               | [Datasheet](https://www.snapeda.com/parts/MBR0530/ON%20Semiconductor/datasheet/)                   |
| PGB1010603MR          | [Model](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse/view-part/?ref=eda)                       | [Datasheet](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse%20Inc./datasheet/)               |
| QWIIC Connector       | [Model](https://www.snapeda.com/parts/PRT-14417/SparkFun/view-part/)                                    | [Datasheet](https://www.snapeda.com/parts/PRT-14417/SparkFun%20Electronics/datasheet/)             |
| RCL CPOL 3528         | [Model](https://www.snapeda.com/parts/CPH3225A/Seiko+Instruments/view-part/?ref=eda)                    | [Datasheet](https://s3.amazonaws.com/snapeda/datasheet/TAJB475K025RNJ_AVX.pdf)                     |
| Resistor 0402         | [Model](https://grabcad.com/library/resistor-0402-1)                                                     | [Datasheet](https://www.yageo.com/upload/media/product/products/datasheet/rchip/PYu-RC_Group_51_RoHS_L_12.pdf) |
| SI1308EDL-T1-GE3 MOSFET | [Model](https://www.snapeda.com/parts/SI1308EDL-T1-GE3/Vishay+Siliconix/view-part/?welcome=home&ref=eda) | [Datasheet](https://www.snapeda.com/parts/SI1308EDL-T1-GE3/Vishay%20Siliconix/datasheet/)         |
| SJ                    | [Model](https://grabcad.com/library/solder-jumpers-1)                                                    | [Datasheet]()                                                                                      |
| USB4110-GF-A          | [Model](https://componentsearchengine.com/part-view/USB4110-GF-A/GCT%20(GLOBAL%20CONNECTOR%20TECHNOLOGY))| [Datasheet](https://gct.co/files/drawings/usb4110.pdf)                                             |
| USBLC6-2SC6Y          | [Model](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/view-part/?welcome=home&ref=eda)  | [Datasheet](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/datasheet/)              |
| W25Q512JVEIQ          | [Model](https://www.snapeda.com/parts/W25Q512JVEIQ/Winbond+Electronics/view-part/?ref=eda)              | [Datasheet](https://www.winbond.com/resource-files/W25Q512JV%20SPI%20RevB%2006252019%20KMS.pdf)    |
| XC6220A331MR-G        | [Model](https://componentsearchengine.com/part-view/XC6220A331MR-G/Torex)                                | [Datasheet](https://product.torexsemi.com/system/files/series/xc6220.pdf)                          |

## Hardware Description

1. **Microcontroller - ESP32-C6-WROOM-1-N8**  
   - Architecture: RISC-V 32-bit  
   - Clock Speed: 160 MHz  
   - Wireless Connectivity: 2.4 GHz Wi-Fi 6, Bluetooth 5.0  

2. **Power Management & Battery**  
   - Battery Type: Li-Po (Lithium Polymer), 3.7V, 1800mAh  
   - Charging Circuit: MCP73831T  
   - Input Voltage: 5V via USB-C  
   - Protection Features: Overcharge and deep discharge protection  
   - Voltage Regulator: LDO regulator for stable 3.3V supply  

3. **Display - E-Paper (E-Ink)**  
   - Size: 7.5 inches  
   - Resolution: 800x480 pixels  
   - Interface: SPI  

4. **SD Card Module**  
   - Type: MicroSD (FAT32 supported)  
   - Interface: SPI  

5. **External NOR Flash**  
   - Capacity: 64MB  
   - Interface: SPI  

6. **Environmental Sensor - BME688**  
   - Senses temperature, humidity, pressure, and gas  
   - Interface: I2C  

7. **Real-Time Clock (RTC) - DS3231SN**  
   - Maintains accurate time/date  
   - Interface: I2C  

8. **USB-C Connector & ESD Protection**  
   - Power input and data transfer  
   - ESD protection and Schottky diode for reverse polarity  

9. **Buttons & User Input**  
   - Tactile push buttons  

10. **Communication Interfaces**  
   - GPIO, SPI, I2C, UART, Wi-Fi, Bluetooth  

## Power Consumption Estimation

| Component                | Current Draw (mA) | Voltage (V) | Power (mW) |
|--------------------------|------------------|-------------|------------|
| ESP32-C6 (Wi-Fi active)  | 200              | 3.3         | 660        |
| E-Paper Display (Updating) | 40             | 3.3         | 132        |
| BME688 Sensor (Measuring)  | 3.1            | 3.3         | 10.23      |
| RTC Module (Active)      | 0.15            | 3.3         | 0.495      |
| SD Card (Active)         | 50              | 3.3         | 165        |
| External NOR Flash       | 25              | 3.3         | 82.5       |
| **Total**                | ~318.5mA        | 3.3         | ~1050.72   |

## ESP32-C6 Pin Mapping

| Component                      | ESP32-C6 Pins                           | Interface | Purpose                                                    |
|--------------------------------|-----------------------------------------|----------|------------------------------------------------------------|
| **E-Paper Display**            | IO7 (MOSI), IO6 (SCK), IO10 (CS), IO5 (DC), IO23 (RST), IO3 (BUSY) | SPI  | Transfers image data and controls e-paper state           |
| **MicroSD Card**               | IO7 (MOSI), IO6 (SCK), IO4 (SS_SD), IO2 (MISO)                   | SPI  | Storage and retrieval of e-books                          |
| **Environmental Sensor (BME688)** | IO21 (SDA), IO22 (SCL)                | I2C      | Reads temperature, humidity, pressure, and gas levels     |
| **RTC Module (DS3231)**        | IO21 (SDA), IO22 (SCL), IO18 (RST), IO1 (32KHz), IO0 (INT_RTC)    | I2C      | Maintains time tracking when system is off                |
| **External NOR Flash**         | IO11 (CS), IO6 (SCK), IO2 (MISO), IO7 (MOSI)                      | SPI  | Additional storage for data                               |
| **Battery Monitoring**         | IO21 (SDA), IO22 (SCL)                | I2C      | Reads battery voltage and charge status                   |
| **USB-C Connection**           | GPIOs via voltage regulation           | USB      | Powers and programs the ESP32-C6                          |
| **Control Buttons**            | IO9 (BOOT), IO15 (CHANGE), EN (RESET)  | GPIO     | User input for device interactions                        |

## Additional Design Notes

### Footprint Adjustments
- **Diode (SMD-Hole)**: The original footprint had pad holes too small for reliable soldering. Pads were updated to 35mil x 190mil.  
- **U4 – MAX17048G+T10**: VBAT power trace width was 0.3mm, while pin widths were only 0.27mm. Adjusted pin size to match trace width.

### Routing & Ground Plane
- Power traces are on the top layer; ~150 vias used for bottom-layer signals.  
- Ground plane on both top and bottom layers for low-impedance grounding and reduced EMI.

### Component Placement
- External ports align with the OpenBook enclosure for accessibility.  
- Test pads near board edges for easy debugging.  
- 100nF decoupling capacitors placed close to IC power pins for noise reduction.

### Schematic & 3D Model Issues
- A net named GND1 appeared but was not functional; removed after review.  
- 3D model updates caused pin order reversals for certain 2-pin components, fixed by rotating 180 degrees.

### Enclosure & 3D Integration
- An alternative enclosure was tested with a custom color.  
- 3D components were imported via two methods depending on their usage frequency.

### Difficulties Encountered
- Am intampinat dificultati la realizarea schematicului pana am inceput sa ma documentez.  
- In etapa de proiectare PCB, cea mai mare provocare a fost sa asez toate componentele in dimensiunile cerute.  
- Rutarea finala a fost de asemenea dificila, necesitand mai multe iteratii pentru a organiza corespunzator toate traseele.
